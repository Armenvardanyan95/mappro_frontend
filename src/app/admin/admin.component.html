<app-header></app-header>

<md-card class="card-with-map">
  <agm-map
    [latitude]="currentPlace ? currentPlace.lat : lat" [longitude]="currentPlace ? currentPlace.lng : lng"
    (mapDblClick)="moveMarker($event)">

    <agm-marker *ngIf="currentPlace" [latitude]="currentPlace.lat"
                [longitude]="currentPlace.lng"></agm-marker>

    <agm-marker *ngFor="let order of orders" [latitude]="order.lat"
                [longitude]="order.lng" label="{{ order.id }}" ></agm-marker>
  </agm-map>

</md-card>


<button (click)="openNewColorDialog()" md-raised-button>New Color</button>
<button (click)="showNewOrderForm = !showNewOrderForm" md-raised-button>New Order</button>

<md-card class="float-right example-card" *ngIf="showNewOrderForm">

  <app-order-edit [(currentPlace)]="currentPlace" (orderUpdated)="getOrders()"
                  [colors]="colors" [users]="users"></app-order-edit>

</md-card>

<md-list>
  <ng-container *ngFor="let order of orders">
      <app-order-view [order]="order" (orderMadeVisible)="changeOrderVisibility($event)"
                      [colors]="colors" [users]="users"></app-order-view>
  </ng-container>
</md-list>

<app-footer></app-footer>
